<div layout="row" layout-wrap class="list-toolbar white md-whiteframe-z1">
  <md-input-container flex flex-sm="100">
    <label>Recherche</label>
    <input ng-model="vm.search.name">
  </md-input-container>

  <md-input-container flex-sm>
    <label>Grouper par</label>
    <md-select ng-model="vm.groupby" ng-change="vm.buildList()">
      <md-option value="letter">premi√®re lettre</md-option>
      <md-option value="status">statut</md-option>
    </md-select>
  </md-input-container>

  <md-button aria-label="Actualiser la liste" ng-click="platforms.reload()">
    <md-icon md-svg-icon="navigation:refresh"></md-icon>
  </md-button>
</div>

<div ng-if="platforms.loading" class="md-padding" layout="row" layout-align="center center">
  <md-progress-circular md-mode="indeterminate"></md-progress-circular>
</div>

<div ng-hide="platforms.loading" ng-repeat="group in vm.list | filter:{ list: vm.search } | naturalSortBy:'name'">
  <h3 class="md-headline" ng-bind="::group.name"></h3>

  <div layout="row" layout-wrap>
    <div class="fade-down" flex="25" flex-lg="33" flex-md="50" flex-sm="100" ng-repeat="p in group.list | filter:vm.search | orderBy:'name'">
      <md-card class="link" ng-click="goto('/platforms/' + p.card.id)">
        <md-card-content class="ellipsis">{{ ::p.name }}</md-card-content>
      </md-card>
    </div>
  </div>
</div>

<md-button ng-if="auth.isAuthorized()" class="fixed md-fab md-fab-bottom-right" aria-label="Nouvelle plateforme" ng-click="vm.showAdd($event)">
  <md-tooltip md-direction="left" md-autohide>Nouvelle plateforme</md-tooltip>
  <md-icon md-svg-icon="content:add"></md-icon>
</md-button>